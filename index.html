<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–¥–µ–∏ –¥–ª—è —Å–≤–∏–¥–∞–Ω–∏–π - Banking Style</title>
    <style>
:root {
  --primary-purple: #6366F1;
  --secondary-purple: #8B5CF6;
  --accent-purple: #A855F7;
  --dark-purple: #4338CA;
  --light-purple: #EDE9FE;
  --gradient-primary: linear-gradient(135deg, #6366F1 0%, #8B5CF6 50%, #A855F7 100%);
  --gradient-card: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(248,250,252,0.9) 100%);
  --background: #F8FAFC;
  --surface: #FFFFFF;
  --surface-elevated: #FEFEFE;
  --text-primary: #0F172A;
  --text-secondary: #64748B;
  --text-muted: #94A3B8;
  --border: #E2E8F0;
  --border-light: #F1F5F9;
  --success: #22C55E;
  --warning: #EAB308;
  --error: #EF4444;
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: "Inter", -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
  background: var(--background);
  color: var(--text-primary);
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.app {
  min-height: 100vh;
  max-width: 1400px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  position: relative;
}

/* Decorative background elements */
.bg-decoration {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
  overflow: hidden;
}

.bg-decoration::before,
.bg-decoration::after {
  content: '';
  position: absolute;
  border-radius: 50%;
  background: var(--gradient-primary);
  opacity: 0.1;
  animation: float 6s ease-in-out infinite;
}

.bg-decoration::before {
  width: 400px;
  height: 400px;
  top: -200px;
  right: -200px;
  animation-delay: -3s;
}

.bg-decoration::after {
  width: 300px;
  height: 300px;
  bottom: -150px;
  left: -150px;
  animation-delay: -1s;
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px) scale(1);
  }
  50% {
    transform: translateY(-20px) scale(1.05);
  }
}

/* Header */
.header {
  background: var(--surface);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  padding: 20px 32px;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: var(--shadow-sm);
}

.header-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  max-width: 1200px;
  margin: 0 auto;
}

.brand {
  display: flex;
  align-items: center;
  gap: 16px;
}

.brand-logo {
  width: 48px;
  height: 48px;
  background: var(--gradient-primary);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 24px;
  font-weight: 700;
  box-shadow: var(--shadow);
}

.brand-info h1 {
  font-size: 1.5rem;
  font-weight: 700;
  margin: 0;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.brand-info p {
  font-size: 0.875rem;
  color: var(--text-secondary);
  margin: 0;
}

.header-actions {
  display: flex;
  align-items: center;
  gap: 16px;
}

.balance-card {
  background: var(--gradient-primary);
  color: white;
  padding: 12px 20px;
  border-radius: 12px;
  box-shadow: var(--shadow);
  text-align: center;
  min-width: 120px;
}

.balance-label {
  font-size: 0.75rem;
  opacity: 0.9;
  font-weight: 500;
}

.balance-value {
  font-size: 1.1rem;
  font-weight: 700;
  margin-top: 2px;
}

/* Container */
.container {
  padding: 40px 32px;
  max-width: 1200px;
  margin: 0 auto;
  flex: 1;
  position: relative;
  z-index: 2;
}

/* Typography */
.page-header {
  text-align: center;
  margin-bottom: 48px;
}

.page-title {
  font-size: 2.5rem;
  font-weight: 800;
  margin-bottom: 12px;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.page-subtitle {
  font-size: 1.125rem;
  color: var(--text-secondary);
  max-width: 600px;
  margin: 0 auto;
  line-height: 1.7;
}

/* Pages */
.page {
  display: none;
  animation: fadeIn 0.5s ease-out;
}

.page.active {
  display: block;
}

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Advanced Form Design */
.form-container {
  max-width: 800px;
  margin: 0 auto;
}

.form-sections {
  display: grid;
  gap: 24px;
}

.form-section {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 32px;
  box-shadow: var(--shadow);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.form-section:hover {
  box-shadow: var(--shadow-lg);
  border-color: var(--light-purple);
  transform: translateY(-2px);
}

.form-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--gradient-primary);
  opacity: 0;
  transition: opacity 0.3s ease;
}

.form-section:hover::before {
  opacity: 1;
}

.section-header {
  display: flex;
  align-items: center;
  gap: 16px;
  margin-bottom: 24px;
}

.section-icon {
  width: 48px;
  height: 48px;
  background: var(--light-purple);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--primary-purple);
  font-size: 20px;
}

.section-title {
  font-size: 1.25rem;
  font-weight: 700;
  margin: 0;
}

.section-description {
  font-size: 0.875rem;
  color: var(--text-secondary);
  margin: 4px 0 0;
}

.input-group {
  position: relative;
}

.form-input {
  width: 100%;
  padding: 16px 20px;
  border: 2px solid var(--border);
  border-radius: 12px;
  font-size: 16px;
  font-weight: 500;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  background: var(--surface);
  color: var(--text-primary);
}

.form-input:focus {
  outline: none;
  border-color: var(--primary-purple);
  box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
  transform: translateY(-1px);
}

.form-input::placeholder {
  color: var(--text-muted);
  font-weight: 400;
}

.input-icon {
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-muted);
  font-size: 18px;
  pointer-events: none;
  transition: color 0.3s ease;
}

.form-input:focus + .input-icon {
  color: var(--primary-purple);
}

/* Premium Button */
.cta-section {
  max-width: 800px;
  margin: 48px auto 0;
  text-align: center;
}

.generate-btn {
  background: var(--gradient-primary);
  color: white;
  border: none;
  padding: 20px 48px;
  border-radius: 16px;
  font-size: 1.125rem;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: var(--shadow-lg);
  position: relative;
  overflow: hidden;
  min-width: 280px;
}

.generate-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.6s;
}

.generate-btn:hover::before {
  left: 100%;
}

.generate-btn:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-xl);
}

.generate-btn:active {
  transform: translateY(-1px);
}

.generate-btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none;
}

.btn-content {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

/* Result Card */
.result-container {
  background: var(--surface-elevated);
  border: 1px solid var(--border-light);
  border-radius: 20px;
  padding: 40px;
  margin: 48px auto 0;
  max-width: 800px;
  box-shadow: var(--shadow-xl);
  position: relative;
  overflow: hidden;
}

.result-container::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 6px;
  background: var(--gradient-primary);
}

.result-header {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 24px;
}

.result-avatar {
  width: 64px;
  height: 64px;
  background: var(--gradient-primary);
  border-radius: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 24px;
  box-shadow: var(--shadow);
}

.result-info h3 {
  font-size: 1.5rem;
  font-weight: 700;
  margin: 0 0 4px 0;
}

.result-info p {
  color: var(--text-secondary);
  font-size: 0.875rem;
  margin: 0;
}

.result-content {
  font-size: 1.125rem;
  line-height: 1.8;
  color: var(--text-primary);
  padding: 24px;
  background: var(--background);
  border-radius: 12px;
  border-left: 4px solid var(--primary-purple);
}

/* Chat Interface - Banking Style */
.chat-interface {
  max-width: 900px;
  margin: 0 auto;
  background: var(--surface);
  border-radius: 20px;
  box-shadow: var(--shadow-xl);
  overflow: hidden;
  border: 1px solid var(--border);
}

.chat-header {
  background: var(--gradient-primary);
  color: white;
  padding: 24px 32px;
  display: flex;
  align-items: center;
  gap: 20px;
}

.chat-avatar {
  width: 56px;
  height: 56px;
  background: rgba(255,255,255,0.2);
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  backdrop-filter: blur(10px);
}

.chat-title h3 {
  font-size: 1.375rem;
  font-weight: 700;
  margin: 0 0 4px 0;
}

.chat-subtitle {
  font-size: 0.875rem;
  opacity: 0.9;
  margin: 0;
}

.chat-body {
  padding: 32px;
  min-height: 500px;
  max-height: 600px;
  overflow-y: auto;
  background: linear-gradient(to bottom, #F8FAFC, #F1F5F9);
}

.message-thread {
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.message-pair {
  animation: slideInUp 0.4s ease-out;
}

@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.message {
  display: flex;
  margin-bottom: 16px;
  position: relative;
}

.message.user {
  justify-content: flex-end;
}

.message.ai {
  justify-content: flex-start;
}

.message-bubble {
  max-width: 75%;
  padding: 16px 20px;
  border-radius: 20px;
  font-size: 0.95rem;
  line-height: 1.5;
  position: relative;
  box-shadow: var(--shadow);
}

.message.user .message-bubble {
  background: var(--gradient-primary);
  color: white;
  border-bottom-right-radius: 6px;
  margin-left: 60px;
}

.message.ai .message-bubble {
  background: var(--surface);
  color: var(--text-primary);
  border: 1px solid var(--border);
  border-bottom-left-radius: 6px;
  margin-right: 60px;
}

.message-timestamp {
  font-size: 0.75rem;
  color: var(--text-muted);
  text-align: center;
  margin: 20px 0;
  position: relative;
}

.message-timestamp::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  height: 1px;
  background: var(--border);
  z-index: 1;
}

.message-timestamp span {
  background: var(--background);
  padding: 0 16px;
  position: relative;
  z-index: 2;
}

.empty-state {
  text-align: center;
  padding: 80px 32px;
  color: var(--text-secondary);
}

.empty-icon {
  width: 80px;
  height: 80px;
  background: var(--light-purple);
  border-radius: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 24px;
  font-size: 32px;
  color: var(--primary-purple);
}

/* Profile Dashboard */
.profile-dashboard {
  max-width: 900px;
  margin: 0 auto;
  display: grid;
  gap: 32px;
}

.profile-overview {
  background: var(--surface);
  border-radius: 20px;
  padding: 40px;
  box-shadow: var(--shadow-xl);
  border: 1px solid var(--border);
  text-align: center;
  position: relative;
  overflow: hidden;
}

.profile-overview::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 6px;
  background: var(--gradient-primary);
}

.profile-avatar-large {
  width: 120px;
  height: 120px;
  border-radius: 24px;
  background: var(--gradient-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 24px;
  color: white;
  font-size: 3rem;
  font-weight: 800;
  box-shadow: var(--shadow-lg);
  border: 6px solid var(--light-purple);
}

.profile-name {
  font-size: 2rem;
  font-weight: 800;
  margin-bottom: 8px;
}

.profile-status {
  color: var(--text-secondary);
  font-size: 1rem;
  margin-bottom: 32px;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 24px;
  margin-top: 32px;
}

.stat-card {
  background: var(--background);
  padding: 24px;
  border-radius: 16px;
  text-align: center;
  border: 1px solid var(--border-light);
  transition: all 0.3s ease;
}

.stat-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

.stat-value {
  font-size: 2.5rem;
  font-weight: 800;
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 8px;
}

.stat-label {
  font-size: 0.875rem;
  color: var(--text-secondary);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.settings-panel {
  background: var(--surface);
  border-radius: 20px;
  padding: 32px;
  box-shadow: var(--shadow-xl);
  border: 1px solid var(--border);
}

.settings-title {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 24px;
  display: flex;
  align-items: center;
  gap: 12px;
}

.settings-list {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.setting-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px;
  background: var(--background);
  border-radius: 12px;
  border: 1px solid var(--border-light);
  transition: all 0.3s ease;
}

.setting-item:hover {
  border-color: var(--light-purple);
  box-shadow: var(--shadow);
}

.setting-info {
  display: flex;
  align-items: center;
  gap: 16px;
}

.setting-icon {
  width: 40px;
  height: 40px;
  background: var(--light-purple);
  border-radius: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--primary-purple);
  font-size: 16px;
}

.setting-details h4 {
  font-size: 1rem;
  font-weight: 600;
  margin: 0 0 4px 0;
}

.setting-details p {
  font-size: 0.875rem;
  color: var(--text-secondary);
  margin: 0;
}

.form-input.inline {
  width: 200px;
  padding: 12px 16px;
  margin: 0;
}

.save-btn {
  background: var(--gradient-primary);
  color: white;
  border: none;
  padding: 16px 32px;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  margin-top: 24px;
  width: 100%;
}

.save-btn:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-lg);
}

/* Navigation */
.nav-container {
  position: fixed;
  bottom: 32px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 1000;
}

.nav-bar {
  background: var(--surface);
  backdrop-filter: blur(20px);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 12px;
  box-shadow: var(--shadow-xl);
  display: flex;
  gap: 8px;
}

.nav-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 12px 20px;
  border: none;
  background: transparent;
  color: var(--text-secondary);
  font-size: 0.75rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 14px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.nav-btn:hover {
  background: var(--light-purple);
  color: var(--primary-purple);
  transform: translateY(-2px);
}

.nav-btn.active {
  background: var(--gradient-primary);
  color: white;
  box-shadow: var(--shadow);
}

.nav-icon {
  font-size: 20px;
}

/* Loading States */
.loading-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(15, 23, 42, 0.8);
  backdrop-filter: blur(4px);
  z-index: 9999;
  align-items: center;
  justify-content: center;
}

.loading-overlay.active {
  display: flex;
}

.loading-card {
  background: var(--surface);
  border-radius: 20px;
  padding: 48px;
  text-align: center;
  box-shadow: var(--shadow-xl);
  max-width: 400px;
  margin: 0 32px;
}

.loading-spinner {
  width: 48px;
  height: 48px;
  border: 4px solid var(--light-purple);
  border-top: 4px solid var(--primary-purple);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: 0 auto 24px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading-text {
  font-size: 1.125rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 8px;
}

.loading-subtext {
  font-size: 0.875rem;
  color: var(--text-secondary);
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 24px 20px;
  }

  .header {
    padding: 16px 20px;
  }

  .page-title {
    font-size: 2rem;
  }

  .form-section {
    padding: 24px;
  }

  .generate-btn {
    padding: 16px 32px;
    min-width: auto;
    width: 100%;
  }

  .nav-container {
    bottom: 20px;
    left: 20px;
    right: 20px;
    transform: none;
  }

  .nav-bar {
    justify-content: space-between;
  }

  .nav-btn {
    padding: 10px 12px;
    flex: 1;
  }

  .message-bubble {
    max-width: 85%;
  }

  .message.user .message-bubble {
    margin-left: 30px;
  }

  .message.ai .message-bubble {
    margin-right: 30px;
  }

  .stats-grid {
    grid-template-columns: 1fr;
  }

  .chat-body {
    padding: 20px;
  }
}

@media (max-width: 480px) {
  .header-content {
    flex-direction: column;
    gap: 16px;
    align-items: flex-start;
  }

  .page-title {
    font-size: 1.75rem;
  }

  .form-section {
    padding: 20px;
  }

  .section-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .profile-avatar-large {
    width: 100px;
    height: 100px;
    font-size: 2.5rem;
  }

  .setting-item {
    flex-direction: column;
    align-items: flex-start;
    gap: 16px;
  }

  .form-input.inline {
    width: 100%;
  }
}
    </style>
</head>
<body>
    <div class="bg-decoration"></div>

    <div class="app">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="brand">
                    <div class="brand-logo">üíú</div>
                    <div class="brand-info">
                        <h1>LoveAI</h1>
                        <p>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —Ä–æ–º–∞–Ω—Ç–∏–∫–∏</p>
                    </div>
                </div>
                <div class="header-actions">
                    <div class="balance-card">
                        <div class="balance-label">–ò–¥–µ–∏ —Å–æ–∑–¥–∞–Ω–æ</div>
                        <div class="balance-value" id="headerIdeasCount">0</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Home Page -->
        <div class="page active" id="home-page">
            <div class="container">
                <div class="page-header">
                    <h2 class="page-title">–°–æ–∑–¥–∞—Ç—å –∏–¥–µ—é —Å–≤–∏–¥–∞–Ω–∏—è</h2>
                    <p class="page-subtitle">–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ–µ–π –¥–µ–≤—É—à–∫–µ, –∏ –Ω–∞—à –ò–ò —Å–æ–∑–¥–∞—Å—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –∏–¥–µ—é –¥–ª—è –Ω–µ–∑–∞–±—ã–≤–∞–µ–º–æ–≥–æ —Å–≤–∏–¥–∞–Ω–∏—è</p>
                </div>

                <form id="dateForm">
                    <div class="form-container">
                        <div class="form-sections">
                            <div class="form-section">
                                <div class="section-header">
                                    <div class="section-icon">üë§</div>
                                    <div>
                                        <h3 class="section-title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                                        <p class="section-description">–ë–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –≤–∞—à–µ–π –¥–µ–≤—É—à–∫–µ</p>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <input type="number" id="age" name="age" class="form-input" placeholder="–í–æ–∑—Ä–∞—Å—Ç –¥–µ–≤—É—à–∫–∏" min="16" max="99" required>
                                    <span class="input-icon">üéÇ</span>
                                </div>
                            </div>

                            <div class="form-section">
                                <div class="section-header">
                                    <div class="section-icon">üíù</div>
                                    <div>
                                        <h3 class="section-title">–ò–Ω—Ç–µ—Ä–µ—Å—ã –∏ —É–≤–ª–µ—á–µ–Ω–∏—è</h3>
                                        <p class="section-description">–ß—Ç–æ –µ—ë –≤–¥–æ—Ö–Ω–æ–≤–ª—è–µ—Ç –∏ —É–≤–ª–µ–∫–∞–µ—Ç</p>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <textarea id="interests" name="interests" class="form-input" rows="4" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —á—Ç–µ–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã, —Ç–∞–Ω—Ü—ã, —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è –ø—Ä–∏—Ä–æ–¥—ã, –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è –ø–æ –ï–≤—Ä–æ–ø–µ..." required></textarea>
                                </div>
                            </div>

                            <div class="form-section">
                                <div class="section-header">
                                    <div class="section-icon">üçΩÔ∏è</div>
                                    <div>
                                        <h3 class="section-title">–ì–∞—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è</h3>
                                        <p class="section-description">–õ—é–±–∏–º–∞—è –∫—É—Ö–Ω—è –∏ –∫—É–ª–∏–Ω–∞—Ä–Ω—ã–µ –ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–∏—è</p>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <input type="text" id="food" name="food" class="form-input" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –∏—Ç–∞–ª—å—è–Ω—Å–∫–∞—è –ø–∞—Å—Ç–∞, —è–ø–æ–Ω—Å–∫–∏–µ —Å—É—à–∏, –¥–æ–º–∞—à–Ω–∏–µ –¥–µ—Å–µ—Ä—Ç—ã...">
                                    <span class="input-icon">ü•Ç</span>
                                </div>
                            </div>

                            <div class="form-section">
                                <div class="section-header">
                                    <div class="section-icon">üéØ</div>
                                    <div>
                                        <h3 class="section-title">–¢–∏–ø –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</h3>
                                        <p class="section-description">–ö–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç —Å–≤–∏–¥–∞–Ω–∏—è –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª–µ–Ω</p>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <select id="activityType" name="activityType" class="form-input" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</option>
                                        <option value="active">üö¥‚Äç‚ôÄÔ∏è –ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏ –∏ —Å–ø–æ—Ä—Ç</option>
                                        <option value="cozy">üè† –£—é—Ç–Ω—ã–µ –¥–æ–º–∞—à–Ω–∏–µ –≤–µ—á–µ—Ä–∞</option>
                                        <option value="cultural">üé≠ –ö—É–ª—å—Ç—É—Ä–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</option>
                                        <option value="extreme">‚ö° –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                                        <option value="romantic">üíï –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–∏–¥–∞–Ω–∏—è</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-section">
                                <div class="section-header">
                                    <div class="section-icon">üí≥</div>
                                    <div>
                                        <h3 class="section-title">–ë—é–¥–∂–µ—Ç —Å–≤–∏–¥–∞–Ω–∏—è</h3>
                                        <p class="section-description">–ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã</p>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <select id="budget" name="budget" class="form-input" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –±—é–¥–∂–µ—Ç</option>
                                        <option value="low">üí∏ –≠–∫–æ–Ω–æ–º–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç</option>
                                        <option value="medium">üíµ –°—Ä–µ–¥–Ω–∏–π –±—é–¥–∂–µ—Ç</option>
                                        <option value="high">üíé –ü—Ä–µ–º–∏—É–º —Å–≤–∏–¥–∞–Ω–∏–µ</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-section">
                                <div class="section-header">
                                    <div class="section-icon">‚è∞</div>
                                    <div>
                                        <h3 class="section-title">–í—Ä–µ–º—è —Å–≤–∏–¥–∞–Ω–∏—è</h3>
                                        <p class="section-description">–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–æ–µ –≤—Ä–µ–º—è —Å—É—Ç–æ–∫</p>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <select id="time" name="time" class="form-input" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è</option>
                                        <option value="morning">üåÖ –£—Ç—Ä–µ–Ω–Ω–∏–µ —á–∞—Å—ã</option>
                                        <option value="day">‚òÄÔ∏è –î–Ω–µ–≤–Ω–æ–µ –≤—Ä–µ–º—è</option>
                                        <option value="evening">üåÜ –í–µ—á–µ—Ä–Ω–∏–µ —á–∞—Å—ã</option>
                                        <option value="night">üåô –ù–æ—á–Ω–æ–µ –≤—Ä–µ–º—è</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="cta-section">
                            <button type="submit" class="generate-btn" id="generateBtn">
                                <div class="btn-content">
                                    <span>‚ú®</span>
                                    <span>–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –∏–¥–µ—é</span>
                                </div>
                            </button>
                        </div>
                    </div>
                </form>

                <div id="result-area"></div>
            </div>
        </div>

        <!-- History Page -->
        <div class="page" id="history-page">
            <div class="container">
                <div class="page-header">
                    <h2 class="page-title">–ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤</h2>
                    <p class="page-subtitle">–í—Å–µ –≤–∞—à–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∏–¥–µ–∏ –¥–ª—è —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö —Å–≤–∏–¥–∞–Ω–∏–π</p>
                </div>

                <div class="chat-interface">
                    <div class="chat-header">
                        <div class="chat-avatar">ü§ñ</div>
                        <div class="chat-title">
                            <h3>LoveAI Assistant</h3>
                            <p class="chat-subtitle">–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏–¥–µ–π –¥–ª—è —Å–≤–∏–¥–∞–Ω–∏–π</p>
                        </div>
                    </div>
                    <div class="chat-body" id="chatMessages">
                        <div class="empty-state">
                            <div class="empty-icon">üí¨</div>
                            <h3>–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</h3>
                            <p>–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏–¥–µ–π –¥–ª—è —Å–≤–∏–¥–∞–Ω–∏–π.<br>–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div class="page" id="profile-page">
            <div class="container">
                <div class="page-header">
                    <h2 class="page-title">–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
                    <p class="page-subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–º –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏</p>
                </div>

                <div class="profile-dashboard">
                    <div class="profile-overview">
                        <div class="profile-avatar-large" id="profileAvatar">–£</div>
                        <h2 class="profile-name" id="profileName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                        <p class="profile-status">Premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Ä¢ –ê–∫—Ç–∏–≤–Ω—ã–π —Å—Ç–∞—Ç—É—Å</p>

                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" id="totalIdeas">0</div>
                                <div class="stat-label">–°–æ–∑–¥–∞–Ω–æ –∏–¥–µ–π</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="daysSinceJoin">1</div>
                                <div class="stat-label">–î–Ω–µ–π —Å –Ω–∞–º–∏</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="favoriteType">‚Äî</div>
                                <div class="stat-label">–õ—é–±–∏–º—ã–π —Ç–∏–ø</div>
                            </div>
                        </div>
                    </div>

                    <div class="settings-panel">
                        <h3 class="settings-title">
                            <span>‚öôÔ∏è</span>
                            –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
                        </h3>

                        <div class="settings-list">
                            <div class="setting-item">
                                <div class="setting-info">
                                    <div class="setting-icon">üë§</div>
                                    <div class="setting-details">
                                        <h4>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h4>
                                        <p>–í–∞—à–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è –≤ —Å–∏—Å—Ç–µ–º–µ</p>
                                    </div>
                                </div>
                                <input type="text" id="userName" class="form-input inline" value="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å">
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <div class="setting-icon">üîî</div>
                                    <div class="setting-details">
                                        <h4>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h4>
                                        <p>–ü–æ–ª—É—á–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</p>
                                    </div>
                                </div>
                                <input type="checkbox" id="notifications" checked>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <div class="setting-icon">üé®</div>
                                    <div class="setting-details">
                                        <h4>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è</h4>
                                        <p>–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏</p>
                                    </div>
                                </div>
                                <input type="checkbox" id="personalization" checked>
                            </div>
                        </div>

                        <button class="save-btn" id="saveProfile">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-container">
            <nav class="nav-bar">
                <button class="nav-btn active" data-page="home">
                    <span class="nav-icon">üè†</span>
                    –ì–ª–∞–≤–Ω–∞—è
                </button>
                <button class="nav-btn" data-page="history">
                    <span class="nav-icon">üìã</span>
                    –ò—Å—Ç–æ—Ä–∏—è
                </button>
                <button class="nav-btn" data-page="profile">
                    <span class="nav-icon">üë§</span>
                    –ü—Ä–æ—Ñ–∏–ª—å
                </button>
            </nav>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-card">
            <div class="loading-spinner"></div>
            <h3 class="loading-text">–°–æ–∑–¥–∞–µ–º –∏–¥–µ–∞–ª—å–Ω—É—é –∏–¥–µ—é</h3>
            <p class="loading-subtext">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∏ –ø–æ–¥–±–∏—Ä–∞–µ–º –ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç...</p>
        </div>
    </div>

    <script>
// Application state
let currentPage = 'home';
let chatHistory = [];
let userProfile = {
    name: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
    totalIdeas: 0,
    lastRequest: null,
    notifications: true,
    personalization: true,
    joinDate: new Date()
};

// Sample ideas data
const sampleIdeas = {
    active: [
        '–í–µ–ª–æ—Å–∏–ø–µ–¥–Ω–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ –ø–æ –∂–∏–≤–æ–ø–∏—Å–Ω—ã–º –º–µ—Å—Ç–∞–º –≥–æ—Ä–æ–¥–∞ —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –≤ —É—é—Ç–Ω–æ–º –∫–∞—Ñ–µ —Å –ø–∞–Ω–æ—Ä–∞–º–Ω—ã–º –≤–∏–¥–æ–º',
        '–ü–µ—à–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ –ø–æ –Ω–∞–±–µ—Ä–µ–∂–Ω–æ–π —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ñ–æ—Ç–æ—Å–µ—Å—Å–∏–µ–π –Ω–∞ –∑–∞–∫–∞—Ç–µ',
        '–ü–æ—Å–µ—â–µ–Ω–∏–µ –≤–µ—Ä–µ–≤–æ—á–Ω–æ–≥–æ –ø–∞—Ä–∫–∞ –∏–ª–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–∫–∞–ª–æ–¥—Ä–æ–º–∞ —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º —É–∂–∏–Ω–æ–º –≤ —Å—Ç–∏–ª—å–Ω–æ–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ',
        '–ü—Ä–æ–≥—É–ª–∫–∞ –ø–æ –±–æ—Ç–∞–Ω–∏—á–µ—Å–∫–æ–º—É —Å–∞–¥—É —Å —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –ø–∏–∫–Ω–∏–∫–æ–º –Ω–∞ —Å–≤–µ–∂–µ–º –≤–æ–∑–¥—É—Ö–µ'
    ],
    cozy: [
        '–£—é—Ç–Ω—ã–π –≤–µ—á–µ—Ä –¥–æ–º–∞ —Å —Å–æ–≤–º–µ—Å—Ç–Ω—ã–º –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ–º –∏–∑—ã—Å–∫–∞–Ω–Ω–æ–≥–æ —É–∂–∏–Ω–∞ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º –ª—é–±–∏–º–æ–≥–æ —Ñ–∏–ª—å–º–∞',
        '–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã –¥–æ–º–∞ —Å –¥–æ–º–∞—à–Ω–µ–π –ø–∏—Ü—Ü–µ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∏ –∞—Ä–æ–º–∞—Ç–Ω—ã–º –≥–æ—Ä—è—á–∏–º —à–æ–∫–æ–ª–∞–¥–æ–º',
        '–°–æ–≤–º–µ—Å—Ç–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π –∫–Ω–∏–≥–∏ —É –∫–∞–º–∏–Ω–∞ —Å —Ç—Ä–∞–≤—è–Ω—ã–º —á–∞–µ–º –∏ –¥–æ–º–∞—à–Ω–µ–π –≤—ã–ø–µ—á–∫–æ–π',
        '–ü—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–µ –∏–∑—ã—Å–∫–∞–Ω–Ω–æ–≥–æ –¥–µ—Å–µ—Ä—Ç–∞ –≤–º–µ—Å—Ç–µ –∏ –¥—É—à–µ–≤–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –ø–æ–¥ –ª—é–±–∏–º—É—é –º—É–∑—ã–∫—É'
    ],
    cultural: [
        '–ü–æ—Å–µ—â–µ–Ω–∏–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≤—ã—Å—Ç–∞–≤–∫–∏ —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º —É–∂–∏–Ω–æ–º –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ –≤—ã—Å–æ–∫–æ–π –∫—É—Ö–Ω–∏',
        '–ü–æ—Ö–æ–¥ –≤ —Ç–µ–∞—Ç—Ä –Ω–∞ –ø—Ä–µ–º—å–µ—Ä–Ω—ã–π —Å–ø–µ–∫—Ç–∞–∫–ª—å —Å –≤–µ—á–µ—Ä–Ω–µ–π –ø—Ä–æ–≥—É–ª–∫–æ–π –ø–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–º—É —Ü–µ–Ω—Ç—Ä—É –≥–æ—Ä–æ–¥–∞',
        '–£–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è —ç–∫—Å–∫—É—Ä—Å–∏—è –ø–æ –º—É–∑–µ—é —Å –æ–±—Å—É–∂–¥–µ–Ω–∏–µ–º —É–≤–∏–¥–µ–Ω–Ω–æ–≥–æ –≤ –∞—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–º –∫–∞—Ñ–µ',
        '–ö–æ–Ω—Ü–µ—Ä—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –∏–ª–∏ –¥–∂–∞–∑–æ–≤–æ–π –º—É–∑—ã–∫–∏ —Å –∏–∑—ã—Å–∫–∞–Ω–Ω—ã–º —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º —É–∂–∏–Ω–æ–º'
    ],
    extreme: [
        '–ö–∞—Ä—Ç–∏–Ω–≥ –∏–ª–∏ –±–æ—É–ª–∏–Ω–≥ —Å –¥—Ä—É–∑—å—è–º–∏, –∑–∞–≤–µ—Ä—à–∞—é—â–∏–π—Å—è —É–∂–∏–Ω–æ–º –≤ —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ',
        '–ó–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∞—è –∫–≤–µ—Å—Ç-–∫–æ–º–Ω–∞—Ç–∞ —Å –∞–¥—Ä–µ–Ω–∞–ª–∏–Ω–æ–≤—ã–º–∏ –∑–∞–¥–∞–Ω–∏—è–º–∏ –∏ –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∞–º–∏',
        '–õ–∞–∑–µ—Ä—Ç–∞–≥ –∏–ª–∏ –ø–µ–π–Ω—Ç–±–æ–ª —Å –ø–æ—Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏–µ–º –ø–æ–±–µ–¥—ã –≤ —É—é—Ç–Ω–æ–º –∫–∞—Ñ–µ',
        '–ü—Ä—ã–∂–æ–∫ —Å –ø–∞—Ä–∞—à—é—Ç–æ–º –≤ —Ç–∞–Ω–¥–µ–º–µ –¥–ª—è —Å–∞–º—ã—Ö —Å–º–µ–ª—ã—Ö –∏ –∞–≤–∞–Ω—Ç—é—Ä–Ω—ã—Ö –ø–∞—Ä'
    ],
    romantic: [
        '–ò–∑—ã—Å–∫–∞–Ω–Ω—ã–π —É–∂–∏–Ω –ø—Ä–∏ —Å–≤–µ—á–∞—Ö –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ —Å –∂–∏–≤–æ–π —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –º—É–∑—ã–∫–æ–π',
        '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ –ø–æ –≥–æ—Ä–æ–¥—É –≤ –≤–µ—á–µ—Ä–Ω–∏—Ö –æ–≥–Ω—è—Ö —Å –ø–æ—Å–µ—â–µ–Ω–∏–µ–º —Å–º–æ—Ç—Ä–æ–≤–æ–π –ø–ª–æ—â–∞–¥–∫–∏',
        '–ò–¥–∏–ª–ª–∏—á–µ—Å–∫–∏–π –ø–∏–∫–Ω–∏–∫ –≤ –∫—Ä–∞—Å–∏–≤–æ–º –º–µ—Å—Ç–µ —Å —à–∞–º–ø–∞–Ω—Å–∫–∏–º, –∫–ª—É–±–Ω–∏–∫–æ–π –∏ –∑–∞–∫–∞—Ç–æ–º',
        '–†–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–π —Å–ø–∞-—Å–∞–ª–æ–Ω –¥–ª—è –ø–∞—Ä —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Ä–∞—Å—Å–ª–∞–±–ª—è—é—â–∏–º–∏ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞–º–∏'
    ]
};

// Initialize application
document.addEventListener('DOMContentLoaded', function() {
    initializeNavigation();
    initializeForm();
    initializeProfile();
    updateAllStats();
    renderChatHistory();
});

// Navigation functionality
function initializeNavigation() {
    const navButtons = document.querySelectorAll('.nav-btn');

    navButtons.forEach(button => {
        button.addEventListener('click', () => {
            const targetPage = button.getAttribute('data-page');
            switchPage(targetPage);
        });
    });
}

function switchPage(pageName) {
    // Update navigation
    document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-page') === pageName) {
            btn.classList.add('active');
        }
    });

    // Update pages
    document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
    });
    document.getElementById(pageName + '-page').classList.add('active');

    currentPage = pageName;

    // Refresh data when switching to history or profile
    if (pageName === 'history') {
        renderChatHistory();
    } else if (pageName === 'profile') {
        updateAllStats();
    }
}

// Form functionality
function initializeForm() {
    const form = document.getElementById('dateForm');
    const generateBtn = document.getElementById('generateBtn');
    const loadingOverlay = document.getElementById('loadingOverlay');

    form.addEventListener('submit', async function(e) {
        e.preventDefault();

        // Show loading
        generateBtn.disabled = true;
        generateBtn.innerHTML = '<div class="btn-content"><span>‚è≥</span><span>–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º...</span></div>';
        loadingOverlay.classList.add('active');

        // Collect form data
        const formData = new FormData(form);
        const requestData = {
            age: formData.get('age'),
            interests: formData.get('interests'),
            food: formData.get('food'),
            activityType: formData.get('activityType'),
            budget: formData.get('budget'),
            time: formData.get('time'),
            timestamp: new Date()
        };

        // Simulate AI processing with realistic delay
        await new Promise(resolve => setTimeout(resolve, 3000));

        // Generate idea
        const idea = generateIdea(requestData);

        // Add to history
        addToHistory(requestData, idea);

        // Show result
        displayResult(idea);

        // Update profile stats
        userProfile.totalIdeas++;
        userProfile.lastRequest = new Date();
        updateAllStats();

        // Hide loading
        loadingOverlay.classList.remove('active');
        generateBtn.disabled = false;
        generateBtn.innerHTML = '<div class="btn-content"><span>‚ú®</span><span>–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –∏–¥–µ—é</span></div>';
    });
}

function generateIdea(data) {
    const ideas = sampleIdeas[data.activityType] || sampleIdeas.romantic;
    const randomIdea = ideas[Math.floor(Math.random() * ideas.length)];

    // Customize based on interests and food preferences
    let customizedIdea = randomIdea;

    if (data.food) {
        customizedIdea += ` –£—á–∏—Ç—ã–≤–∞—è –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –∫ ${data.food} –∫—É—Ö–Ω–µ, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –≤—ã–±—Ä–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –∑–∞–≤–µ–¥–µ–Ω–∏–µ —Å –≤—ã—Å–æ–∫–∏–º —Ä–µ–π—Ç–∏–Ω–≥–æ–º.`;
    }

    if (data.interests) {
        customizedIdea += ` –î–∞–Ω–Ω–∞—è –∏–¥–µ—è –∏–¥–µ–∞–ª—å–Ω–æ —Å–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å –µ—ë —É–≤–ª–µ—á–µ–Ω–∏—è–º–∏: ${data.interests}.`;
    }

    // Add budget considerations with detailed advice
    const budgetAdvice = {
        'low': '–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∫—É–ª—å—Ç—É—Ä–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏ –ø–∞—Ä–∫–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–Ω–æ–≥–æ, –Ω–æ –∑–∞–ø–æ–º–∏–Ω–∞—é—â–µ–≥–æ—Å—è —Å–≤–∏–¥–∞–Ω–∏—è.',
        'medium': '–°–æ–≤–µ—Ç: —É–º–µ—Ä–µ–Ω–Ω—ã–π –±—é–¥–∂–µ—Ç –ø–æ–∑–≤–æ–ª–∏—Ç —Å–æ–∑–¥–∞—Ç—å –∫–æ–º—Ñ–æ—Ä—Ç–Ω—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –±–µ–∑ –∏–∑–ª–∏—à–Ω–∏—Ö —Ç—Ä–∞—Ç.',
        'high': '–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏: –ø—Ä–µ–º–∏—É–º-–±—é–¥–∂–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–º —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞–º, —á–∞—Å—Ç–Ω—ã–º –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è–º –∏ –ª—é–∫—Å–æ–≤—ã–º —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è–º.'
    };

    if (budgetAdvice[data.budget]) {
        customizedIdea += ` ${budgetAdvice[data.budget]}`;
    }

    return customizedIdea;
}

function displayResult(idea) {
    const resultArea = document.getElementById('result-area');

    resultArea.innerHTML = `
        <div class="result-container">
            <div class="result-header">
                <div class="result-avatar">‚ú®</div>
                <div class="result-info">
                    <h3>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞</h3>
                    <p>–°–æ–∑–¥–∞–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏</p>
                </div>
            </div>
            <div class="result-content">${idea}</div>
        </div>
    `;

    // Smooth scroll to result
    resultArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function addToHistory(request, response) {
    const historyItem = {
        id: Date.now(),
        request: {
            summary: `${request.age} –ª–µ—Ç ‚Ä¢ ${request.interests || '–∏–Ω—Ç–µ—Ä–µ—Å—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã'} ‚Ä¢ ${getActivityTypeLabel(request.activityType)}`,
            details: request
        },
        response: response,
        timestamp: new Date()
    };

    chatHistory.unshift(historyItem);
}

function getActivityTypeLabel(type) {
    const labels = {
        'active': '–ê–∫—Ç–∏–≤–Ω—ã–π –æ—Ç–¥—ã—Ö',
        'cozy': '–î–æ–º–∞—à–Ω–∏–π —É—é—Ç',
        'cultural': '–ö—É–ª—å—Ç—É—Ä–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞',
        'extreme': '–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è',
        'romantic': '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤–∏–¥–∞–Ω–∏–µ'
    };
    return labels[type] || type;
}

function renderChatHistory() {
    const chatMessages = document.getElementById('chatMessages');

    if (chatHistory.length === 0) {
        chatMessages.innerHTML = `
            <div class="empty-state">
                <div class="empty-icon">üí¨</div>
                <h3>–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞</h3>
                <p>–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏–¥–µ–π –¥–ª—è —Å–≤–∏–¥–∞–Ω–∏–π.<br>–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é!</p>
            </div>
        `;
        return;
    }

    let messagesHtml = '<div class="message-thread">';

    chatHistory.forEach((item, index) => {
        messagesHtml += `
            <div class="message-pair">
                <div class="message user">
                    <div class="message-bubble">
                        <strong>üìù –ú–æ–π –∑–∞–ø—Ä–æ—Å:</strong><br>
                        ${item.request.summary}
                    </div>
                </div>
                <div class="message ai">
                    <div class="message-bubble">
                        <strong>üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è LoveAI:</strong><br>
                        ${item.response}
                    </div>
                </div>
                <div class="message-timestamp">
                    <span>${item.timestamp.toLocaleString('ru-RU', {
                        day: 'numeric',
                        month: 'long',
                        hour: '2-digit',
                        minute: '2-digit'
                    })}</span>
                </div>
            </div>
        `;
    });

    messagesHtml += '</div>';
    chatMessages.innerHTML = messagesHtml;

    // Auto-scroll to bottom
    setTimeout(() => {
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }, 100);
}

// Profile functionality
function initializeProfile() {
    const saveBtn = document.getElementById('saveProfile');
    const userNameInput = document.getElementById('userName');
    const notificationsCheckbox = document.getElementById('notifications');
    const personalizationCheckbox = document.getElementById('personalization');

    saveBtn.addEventListener('click', function() {
        userProfile.name = userNameInput.value || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
        userProfile.notifications = notificationsCheckbox.checked;
        userProfile.personalization = personalizationCheckbox.checked;

        updateProfileDisplay();

        // Show success message
        const originalText = saveBtn.textContent;
        saveBtn.textContent = '–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ! ‚úÖ';
        saveBtn.style.background = 'linear-gradient(135deg, #22C55E, #16A34A)';

        setTimeout(() => {
            saveBtn.textContent = originalText;
            saveBtn.style.background = '';
        }, 2500);
    });
}

function updateAllStats() {
    // Update header
    document.getElementById('headerIdeasCount').textContent = userProfile.totalIdeas;

    // Update profile stats
    document.getElementById('totalIdeas').textContent = userProfile.totalIdeas;

    // Calculate days since join
    const daysSinceJoin = Math.floor((new Date() - userProfile.joinDate) / (1000 * 60 * 60 * 24));
    document.getElementById('daysSinceJoin').textContent = daysSinceJoin || 1;

    // Calculate favorite activity type
    if (chatHistory.length > 0) {
        const activityCounts = {};
        chatHistory.forEach(item => {
            const type = item.request.details.activityType;
            activityCounts[type] = (activityCounts[type] || 0) + 1;
        });

        const favoriteType = Object.keys(activityCounts).reduce((a, b) => 
            activityCounts[a] > activityCounts[b] ? a : b
        );

        document.getElementById('favoriteType').textContent = getActivityTypeLabel(favoriteType);
    }
}

function updateProfileDisplay() {
    document.getElementById('profileName').textContent = userProfile.name;
    document.getElementById('profileAvatar').textContent = userProfile.name.charAt(0).toUpperCase();
    document.getElementById('userName').value = userProfile.name;
    document.getElementById('notifications').checked = userProfile.notifications;
    document.getElementById('personalization').checked = userProfile.personalization;
}

// Initialize profile display
updateProfileDisplay();
    

// –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –æ –í–µ–ª–∏–∫–æ–º –ù–æ–≤–≥–æ—Ä–æ–¥–µ –¥–ª—è —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏—Ö —Å–≤–∏–¥–∞–Ω–∏–π
const novgorodPlaces = {
    restaurants: [
        "–†–µ—Å—Ç–æ—Ä–∞–Ω Berg's House (—É–ª. –ë–æ–ª—å—à–∞—è –ú–æ—Å–∫–æ–≤—Å–∫–∞—è, 24) - –∫—É–ø–µ—á–µ—Å–∫–∏–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω —Å —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –∞—Ç–º–æ—Å—Ñ–µ—Ä–æ–π",
        "MARUSYA (—É–ª. –ü—Ä–µ–¥—Ç–µ—á–µ–Ω—Å–∫–∞—è, 24) - –≥–∞—Å—Ç—Ä–æ–∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å –∂–∏–≤–æ–π –º—É–∑—ã–∫–æ–π", 
        "–†–µ—Å—Ç–æ—Ä–∞–Ω –ù–∞ –°–æ–ª–Ω—Ü–µ - —É—é—Ç–Ω–æ–µ –º–µ—Å—Ç–æ —Å –∫–∞—Ä–∞–æ–∫–µ-–≤–µ—á–µ—Ä–∏–Ω–∫–∞–º–∏",
        "–ü—Ä—è–Ω–∏–∫ - —Ä–µ—Å—Ç–æ—Ä–∞–Ω —Å —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π –º—É–∑—ã–∫–æ–π –∏ —Å–≤–µ—á–∞–º–∏",
        "–Æ—Ä—å–µ–≤—Å–∫–æ–µ –ü–æ–¥–≤–æ—Ä—å–µ - –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —É–∂–∏–Ω–∞ –ø—Ä–∏ —Å–≤–µ—á–∞—Ö",
        "La Chatte –∫–∞—Ñ–µ - –∏—Ç–∞–ª—å—è–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è –≤ —É—é—Ç–Ω–æ–π –æ–±—Å—Ç–∞–Ω–æ–≤–∫–µ",
        "–¢—Ä–∞—Ç—Ç–æ—Ä–∏—è –¢–µ–ø–ª–æ - –∞—É—Ç–µ–Ω—Ç–∏—á–Ω–∞—è –∏—Ç–∞–ª—å—è–Ω—Å–∫–∞—è –∫—É—Ö–Ω—è –∏ –ø–∏—Ü—Ü–∞"
    ],
    cultural: [
        "–ù–æ–≤–≥–æ—Ä–æ–¥—Å–∫–∏–π –∫—Ä–µ–º–ª—å (–î–µ—Ç–∏–Ω–µ—Ü) - —Å–µ—Ä–¥—Ü–µ –≥–æ—Ä–æ–¥–∞ —Å –º–Ω–æ–≥–æ–≤–µ–∫–æ–≤–æ–π –∏—Å—Ç–æ—Ä–∏–µ–π",
        "–°–æ—Ñ–∏–π—Å–∫–∏–π —Å–æ–±–æ—Ä - —Å—Ç–∞—Ä–µ–π—à–∏–π –ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω—ã–π —Ö—Ä–∞–º –†–æ—Å—Å–∏–∏", 
        "–Ø—Ä–æ—Å–ª–∞–≤–æ–≤–æ –î–≤–æ—Ä–∏—â–µ - –º–µ—Å—Ç–æ —Ç–æ—Ä–≥–æ–≤–æ–π –∏ —Ä–µ–ª–∏–≥–∏–æ–∑–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏",
        "–†—é—Ä–∏–∫–æ–≤–æ –≥–æ—Ä–æ–¥–∏—â–µ - –∫–æ–ª—ã–±–µ–ª—å —Ä–æ—Å—Å–∏–π—Å–∫–æ–π –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏",
        "–ü–∞–º—è—Ç–Ω–∏–∫ –¢—ã—Å—è—á–µ–ª–µ—Ç–∏–µ –†–æ—Å—Å–∏–∏ - —Å–∏–º–≤–æ–ª –µ–¥–∏–Ω—Å—Ç–≤–∞ –Ω–∞—Ä–æ–¥–∞",
        "–ì—Ä–∞–Ω–æ–≤–∏—Ç–∞—è –ø–∞–ª–∞—Ç–∞ - —É–Ω–∏–∫–∞–ª—å–Ω–∞—è –≥–æ—Ç–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞",
        "–ú—É–∑–µ–π –¥–µ—Ä–µ–≤—è–Ω–Ω–æ–≥–æ –∑–æ–¥—á–µ—Å—Ç–≤–∞ –í–∏—Ç–æ—Å–ª–∞–≤–ª–∏—Ü—ã"
    ],
    activities: [
        "–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ –ø–æ –∫—Ä–µ–ø–æ—Å—Ç–Ω–æ–π —Å—Ç–µ–Ω–µ –∫—Ä–µ–º–ª—è —Å –≤–∏–¥–æ–º –Ω–∞ –í–æ–ª—Ö–æ–≤",
        "–ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –≤ –≥–æ–Ω—á–∞—Ä–Ω–æ–π –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π '–ö–æ–ª–æ–∫–æ–ª'",
        "–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å '–ü–æ—Ü–µ–ª—É–π' –≤ Art&Wine Fest", 
        "–ü–æ–ª—ë—Ç –¥–ª—è –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö –Ω–∞ –≤–æ–∑–¥—É—à–Ω–æ–º —à–∞—Ä–µ '–°–µ—Ä–¥—Ü–µ'",
        "–í–µ—á–µ—Ä–Ω—è—è –≤–æ–¥–Ω–∞—è –ø—Ä–æ–≥—É–ª–∫–∞ '–ò–ª—å–º–µ–Ω—Å–∫–∏–π –∑–∞–∫–∞—Ç' –Ω–∞ –∫–∞—Ç–µ—Ä–µ",
        "–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –∫–≤–µ—Å—Ç—ã –∏ —ç—Å–∫–µ–π–ø-—Ä—É–º—ã –¥–ª—è –¥–≤–æ–∏—Ö",
        "–ì–ª—ç–º–ø–∏–Ω–≥ '–ì—Ä–∏–Ω –Ø—Ä–¥' - —Ä–æ–º–∞–Ω—Ç–∏–∫–∞ –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ –ø–æ–¥ –∑–≤–µ–∑–¥–∞–º–∏"
    ],
    parks: [
        "–ö—Ä–µ–º–ª—ë–≤—Å–∫–∏–π –ø–∞—Ä–∫ - –∂–∏–≤–æ–ø–∏—Å–Ω—ã–µ –∞–ª–ª–µ–∏ –≤–æ–∫—Ä—É–≥ –¥—Ä–µ–≤–Ω–∏—Ö —Å—Ç–µ–Ω",
        "–ü–∞—Ä–∫ 30 –ª–µ—Ç –û–∫—Ç—è–±—Ä—è - –æ—Ç–¥—ã—Ö —Å –∞—Ç—Ç—Ä–∞–∫—Ü–∏–æ–Ω–∞–º–∏ –∏ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è–º–∏", 
        "–ö—Ä–∞—Å–Ω–æ–µ –ø–æ–ª–µ - –ø—Ä–æ—Å—Ç–æ—Ä –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞ –∏ –ø–∏–∫–Ω–∏–∫–æ–≤",
        "–°–∫–≤–µ—Ä —É –î–µ—Å—è—Ç–∏–Ω–Ω–æ–≥–æ –º–æ–Ω–∞—Å—Ç—ã—Ä—è —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º —Ñ–æ–Ω–∞—Ä–µ–º"
    ]
};

// –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞ –æ—Ç GigaChat API
async function getGigaChatToken() {
    // –í–ê–ñ–ù–û: –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —ç—Ç–æ—Ç –∫–ª—é—á –¥–æ–ª–∂–µ–Ω —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!
    const CLIENT_SECRET = '–í–ê–®_–ö–õ–Æ–ß_–ê–í–¢–û–†–ò–ó–ê–¶–ò–ò'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á

    try {
        const response = await fetch('https://ngw.devices.sberbank.ru:9443/api/v2/oauth', {
            method: 'POST',
            headers: {
                'Authorization': `Basic ${CLIENT_SECRET}`,
                'RqUID': crypto.randomUUID(),
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: 'scope=GIGACHAT_API_PERS'
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        return data.access_token;
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞:', error);
        throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ò–ò. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
    }
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ 
function getActivityTypeLabel(type) {
    const labels = {
        'active': '–ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–≥—É–ª–∫–∏ –∏ —Å–ø–æ—Ä—Ç',
        'cozy': '–£—é—Ç–Ω—ã–µ –¥–æ–º–∞—à–Ω–∏–µ –≤–µ—á–µ—Ä–∞',
        'cultural': '–ö—É–ª—å—Ç—É—Ä–Ω—ã–µ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è', 
        'extreme': '–≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è',
        'romantic': '–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤–∏–¥–∞–Ω–∏—è'
    };
    return labels[type] || type;
}

function getBudgetLabel(budget) {
    const labels = {
        'low': '–≠–∫–æ–Ω–æ–º–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç',
        'medium': '–°—Ä–µ–¥–Ω–∏–π –±—é–¥–∂–µ—Ç', 
        'high': '–ü—Ä–µ–º–∏—É–º —Å–≤–∏–¥–∞–Ω–∏–µ'
    };
    return labels[budget] || budget;
}

function getTimeLabel(time) {
    const labels = {
        'morning': '–£—Ç—Ä–µ–Ω–Ω–∏–µ —á–∞—Å—ã',
        'day': '–î–Ω–µ–≤–Ω–æ–µ –≤—Ä–µ–º—è',
        'evening': '–í–µ—á–µ—Ä–Ω–∏–µ —á–∞—Å—ã',
        'night': '–ù–æ—á–Ω–æ–µ –≤—Ä–µ–º—è'
    };
    return labels[time] || time;
}

// –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–¥–µ–π —Å –ø–æ–º–æ—â—å—é GigaChat
async function generateIdea(data) {
    try {
        // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞
        const accessToken = await getGigaChatToken();

        // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å –º–µ—Å—Ç–∞–º–∏ –í–µ–ª–∏–∫–æ–≥–æ –ù–æ–≤–≥–æ—Ä–æ–¥–∞
        const placesContext = `
        –†–µ—Å—Ç–æ—Ä–∞–Ω—ã: ${novgorodPlaces.restaurants.join('; ')}

        –ö—É–ª—å—Ç—É—Ä–Ω—ã–µ –º–µ—Å—Ç–∞: ${novgorodPlaces.cultural.join('; ')}

        –†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: ${novgorodPlaces.activities.join('; ')}

        –ü–∞—Ä–∫–∏ –∏ –ø—Ä–∏—Ä–æ–¥–∞: ${novgorodPlaces.parks.join('; ')}
        `;

        // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–º–ø—Ç
        const prompt = `–°–æ–∑–¥–∞–π –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—É—é –∏ –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–¥–µ—é —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–≤–∏–¥–∞–Ω–∏—è –≤ –í–µ–ª–∏–∫–æ–º –ù–æ–≤–≥–æ—Ä–æ–¥–µ –¥–ª—è –¥–µ–≤—É—à–∫–∏ ${data.age} –ª–µ—Ç.

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–µ–≤—É—à–∫–µ:
- –í–æ–∑—Ä–∞—Å—Ç: ${data.age} –ª–µ—Ç
- –ò–Ω—Ç–µ—Ä–µ—Å—ã –∏ —É–≤–ª–µ—á–µ–Ω–∏—è: ${data.interests}
- –ö—É–ª–∏–Ω–∞—Ä–Ω—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è: ${data.food}
- –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–π —Ç–∏–ø –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: ${getActivityTypeLabel(data.activityType)}
- –ë—é–¥–∂–µ—Ç: ${getBudgetLabel(data.budget)} 
- –í—Ä–µ–º—è —Å—É—Ç–æ–∫: ${getTimeLabel(data.time)}

–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Å—Ç–∞ –≤ –í–µ–ª–∏–∫–æ–º –ù–æ–≤–≥–æ—Ä–æ–¥–µ:
${placesContext}

–¢–†–ï–ë–û–í–ê–ù–ò–Ø:
1. –ò—Å–ø–æ–ª—å–∑—É–π –¢–û–õ–¨–ö–û —Ä–µ–∞–ª—å–Ω—ã–µ –º–µ—Å—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –≤—ã—à–µ
2. –°–æ–∑–¥–∞–π –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω —Å–≤–∏–¥–∞–Ω–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –ª–æ–∫–∞—Ü–∏—è–º–∏ –∏ –∞–¥—Ä–µ—Å–∞–º–∏
3. –£—á—Ç–∏ –≤—Å–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –¥–µ–≤—É—à–∫–∏
4. –î–æ–±–∞–≤—å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã –∏ –¥–µ—Ç–∞–ª–∏
5. –°–¥–µ–ª–∞–π –∏–¥–µ—é —Ä–æ–º–∞–Ω—Ç–∏—á–Ω–æ–π –∏ –Ω–µ–∑–∞–±—ã–≤–∞–µ–º–æ–π
6. –£–∫–∞–∂–∏ –ø—Ä–∏–º–µ—Ä–Ω—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
7. –î–æ–±–∞–≤—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞ —Å–ª—É—á–∞–π –ø–ª–æ—Ö–æ–π –ø–æ–≥–æ–¥—ã

–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∏ —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
- –ù–∞–∑–≤–∞–Ω–∏–µ –∏–¥–µ–∏ —Å–≤–∏–¥–∞–Ω–∏—è
- –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞–Ω–∞
- –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –º–µ—Å—Ç–∞ —Å –∞–¥—Ä–µ—Å–∞–º–∏
- –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–≤–µ—Ç—ã
- –ß—Ç–æ –≤–∑—è—Ç—å —Å —Å–æ–±–æ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)`;

        // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –∫ GigaChat
        const response = await fetch('https://gigachat.devices.sberbank.ru/api/v1/chat/completions', {
            method: 'POST',
            headers: {
                'Authorization': `Bearer ${accessToken}`,
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                model: 'GigaChat:latest',
                messages: [
                    {
                        role: 'system', 
                        content: '–¢—ã —ç–∫—Å–ø–µ—Ä—Ç –ø–æ —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º —Å–≤–∏–¥–∞–Ω–∏—è–º –≤ –í–µ–ª–∏–∫–æ–º –ù–æ–≤–≥–æ—Ä–æ–¥–µ. –°–æ–∑–¥–∞–≤–∞–µ—à—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω—ã–µ –∏–¥–µ–∏ —Å–≤–∏–¥–∞–Ω–∏–π, –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –º–µ—Å—Ç–∞ –≥–æ—Ä–æ–¥–∞.'
                    },
                    {
                        role: 'user',
                        content: prompt
                    }
                ],
                max_tokens: 800,
                temperature: 0.8
            })
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const aiData = await response.json();

        if (aiData.choices && aiData.choices[0]) {
            return aiData.choices[0].message.content;
        } else {
            throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–≤–µ—Ç –æ—Ç –ò–ò');
        }

    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–¥–µ–∏:', error);

        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º fallback –∏–¥–µ—é –ø—Ä–∏ –æ—à–∏–±–∫–µ
        return `üåπ **–†–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ —Å–≤–∏–¥–∞–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–º –ù–æ–≤–≥–æ—Ä–æ–¥–µ**

–ò–∑–≤–∏–Ω–∏—Ç–µ, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –Ω–µ–ø–æ–ª–∞–¥–∫–∏ —Å –ò–ò. –ù–æ –≤–æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è –∏–¥–µ—è:

üìç **–ü–ª–∞–Ω —Å–≤–∏–¥–∞–Ω–∏—è:**
1. **–í—Å—Ç—Ä–µ—á–∞ —É –ø–∞–º—è—Ç–Ω–∏–∫–∞ –¢—ã—Å—è—á–µ–ª–µ—Ç–∏–µ –†–æ—Å—Å–∏–∏** - —Å–∏–º–≤–æ–ª–∏—á–Ω–æ–µ –Ω–∞—á–∞–ª–æ
2. **–ü—Ä–æ–≥—É–ª–∫–∞ –ø–æ –ö—Ä–µ–º–ª—ë–≤—Å–∫–∏–º —Å—Ç–µ–Ω–∞–º** —Å –≤–∏–¥–æ–º –Ω–∞ —Ä–µ–∫—É –í–æ–ª—Ö–æ–≤  
3. **–£–∂–∏–Ω –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–µ "–ü—Ä—è–Ω–∏–∫"** - —Ä–æ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ —Å–æ —Å–≤–µ—á–∞–º–∏
4. **–í–µ—á–µ—Ä–Ω—è—è –ø—Ä–æ–≥—É–ª–∫–∞ –ø–æ –Ø—Ä–æ—Å–ª–∞–≤–æ–≤—É –î–≤–æ—Ä–∏—â—É**

üí° **–°–æ–≤–µ—Ç:** –ó–∞—Ö–≤–∞—Ç–∏—Ç–µ –ø–ª–µ–¥ –¥–ª—è –ø–æ—Å–∏–¥–µ–ª–æ–∫ —É —Ä–µ–∫–∏ –∏ –Ω–µ –∑–∞–±—É–¥—å—Ç–µ —Ñ–æ—Ç–æ–∞–ø–ø–∞—Ä–∞—Ç –¥–ª—è –Ω–µ–∑–∞–±—ã–≤–∞–µ–º—ã—Ö –∫–∞–¥—Ä–æ–≤!

‚ö†Ô∏è –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –∏–¥–µ—é –µ—â–µ —Ä–∞–∑ - –æ–±—ã—á–Ω–æ –ò–ò –æ—Ç–≤–µ—á–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –∏ –¥–µ—Ç–∞–ª—å–Ω–æ.`;
    }
}

// –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
function displayResult(idea) {
    const resultArea = document.getElementById('result-area');

    // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –∏–¥–µ–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    let formattedIdea = idea
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // –ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç
        .replace(/\*(.*?)\*/g, '<em>$1</em>') // –ö—É—Ä—Å–∏–≤  
        .replace(/(\d+\.)/g, '<br><strong>$1</strong>') // –ù—É–º–µ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏
        .replace(/üìç|üåπ|üí°|‚ù§Ô∏è|üéØ|‚≠ê/g, '<span style="font-size: 1.2em;">$&</span>'); // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —ç–º–æ–¥–∑–∏

    resultArea.innerHTML = `
        <div class="result-container">
            <div class="result-header">
                <div class="result-avatar">üíù</div>
                <div class="result-info">
                    <h3>–í–∞—à–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∏–¥–µ—è –≥–æ—Ç–æ–≤–∞!</h3>
                    <p>–°–æ–∑–¥–∞–Ω–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –≤–∞—Å —Å –ø–æ–º–æ—â—å—é –ò–ò ‚Ä¢ ${new Date().toLocaleString('ru-RU', {
                        day: 'numeric',
                        month: 'long', 
                        hour: '2-digit',
                        minute: '2-digit'
                    })}</p>
                </div>
            </div>
            <div class="result-content">
                ${formattedIdea}
            </div>
            <div class="result-actions" style="margin-top: 24px; text-align: center;">
                <button onclick="shareIdea()" class="share-btn" style="
                    background: linear-gradient(135deg, #6366F1, #8B5CF6); 
                    color: white; 
                    border: none; 
                    padding: 12px 24px; 
                    border-radius: 8px; 
                    margin-right: 12px;
                    cursor: pointer;
                    font-weight: 600;
                ">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –∏–¥–µ–µ–π</button>
                <button onclick="generateNewIdea()" class="new-idea-btn" style="
                    background: transparent; 
                    color: #6366F1; 
                    border: 2px solid #6366F1; 
                    padding: 12px 24px; 
                    border-radius: 8px;
                    cursor: pointer;
                    font-weight: 600;
                ">üîÑ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–¥–µ—é</button>
            </div>
        </div>
    `;

    // –ü–ª–∞–≤–Ω–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
    resultArea.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è"
function shareIdea() {
    const resultText = document.querySelector('.result-content').innerText;

    if (navigator.share) {
        navigator.share({
            title: 'LoveAI - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –∏–¥–µ—è —Å–≤–∏–¥–∞–Ω–∏—è',
            text: resultText,
            url: window.location.href
        });
    } else {
        // –ö–æ–ø–∏—Ä—É–µ–º –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
        navigator.clipboard.writeText(resultText).then(() => {
            alert('–ò–¥–µ—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞! üìã');
        }).catch(() => {
            // Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
            prompt('–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç—É –∏–¥–µ—é:', resultText);
        });
    }
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∏–¥–µ–∏
function generateNewIdea() {
    document.getElementById('result-area').innerHTML = '';
    window.scrollTo({ top: 0, behavior: 'smooth' });
}
</script>
</body>
</html>
